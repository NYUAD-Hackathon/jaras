<html>
  <head>

  <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

    <div id="id01"></div>
  <script type="text/javascript" src="https://www.google.com/jsapi">

</script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["geomap"]});
      google.setOnLoadCallback(drawMap);
      var country ;


      function drawMap() {
        var data = google.visualization.arrayToDataTable([
                    ['Country'],
                    ['China'],
                    ['India'],
                    ['United States'],
                    ['Indonesia'],
                    ['Brazil'],
                    ['Pakistan'],
                    ['Nigeria'],
                    ['Bangladesh'],
                    ['Russia'],
                    ['Japan'],
                    ['Mexico'],
                    ['Philippines'],
                    ['Vietnam'],
                    ['Ethiopia'],
                    ['Egypt'],
                    ['Germany'],
                    ['Iran'],
                    ['Turkey'],
                    ['Democratic Republic of the Congo'],
                    ['Thailand'],
                    ['France'],
                    ['United Kingdom'],
                    ['Italy'],
                    ['Burma'],
                    ['South Africa'],
                    ['South Korea'],
                    ['Colombia'],
                    ['Spain'],
                    ['Ukraine'],
                    ['Tanzania'],
                    ['Kenya'],
                    ['Argentina'],
                    ['Algeria'],
                    ['Poland'],
                    ['Sudan'],
                    ['Uganda'],
                    ['Canada'],
                    ['Iraq'],
                    ['Morocco'],
                    ['Peru'],
                    ['Uzbekistan'],
                    ['Saudi Arabia'],
                    ['Malaysia'],
                    ['Venezuela'],
                    ['Nepal'],
                    ['Afghanistan'],
                    ['Yemen'],
                    ['North Korea'],
                    ['Ghana'],
                    ['Mozambique'],
                    ['Taiwan'],
                    ['Australia'],
                    ['Ivory Coast'],
                    ['Syria'],
                    ['Madagascar'],
                    ['Angola'],
                    ['Cameroon'],
                    ['Sri Lanka'],
                    ['Romania'],
                    ['Burkina Faso'],
                    ['Niger'],
                    ['Kazakhstan'],
                    ['Netherlands'],
                    ['Chile'],
                    ['Malawi'],
                    ['Ecuador'],
                    ['Guatemala'],
                    ['Mali'],
                    ['Cambodia'],
                    ['Senegal'],
                    ['Zambia'],
                    ['Zimbabwe'],
                    ['Chad'],
                    ['South Sudan'],
                    ['Belgium'],
                    ['Cuba'],
                    ['Tunisia'],
                    ['Guinea'],
                    ['Greece'],
                    ['Portugal'],
                    ['Rwanda'],
                    ['Czech Republic'],
                    ['Somalia'],
                    ['Haiti'],
                    ['Benin'],
                    ['Burundi'],
                    ['Bolivia'],
                    ['Hungary'],
                    ['Sweden'],
                    ['Belarus'],
                    ['Dominican Republic'],
                    ['Azerbaijan'],
                    ['Honduras'],
                    ['Austria'],
                    ['United Arab Emirates'],
                    ['Israel'],
                    ['Switzerland'],
                    ['Tajikistan'],
                    ['Bulgaria'],
                    ['Hong Kong (China)'],
                    ['Serbia'],
                    ['Papua New Guinea'],
                    ['Paraguay'],
                    ['Laos'],
                    ['Jordan'],
                    ['El Salvador'],
                    ['Eritrea'],
                    ['Libya'],
                    ['Togo'],
                    ['Sierra Leone'],
                    ['Nicaragua'],
                    ['Kyrgyzstan'],
                    ['Denmark'],
                    ['Finland'],
                    ['Slovakia'],
                    ['Singapore'],
                    ['Turkmenistan'],
                    ['Norway'],
                    ['Lebanon'],
                    ['Costa Rica'],
                    ['Central African Republic'],
                    ['Ireland'],
                    ['Georgia'],
                    ['New Zealand'],
                    ['Republic of the Congo'],
                    ['Palestine'],
                    ['Liberia'],
                    ['Croatia'],
                    ['Oman'],
                    ['Bosnia and Herzegovina'],
                    ['Puerto Rico'],
                    ['Kuwait'],
                    ['Moldov'],
                    ['Mauritania'],
                    ['Panama'],
                    ['Uruguay'],
                    ['Armenia'],
                    ['Lithuania'],
                    ['Albania'],
                    ['Mongolia'],
                    ['Jamaica'],
                    ['Namibia'],
                    ['Lesotho'],
                    ['Qatar'],
                    ['Macedonia'],
                    ['Slovenia'],
                    ['Botswana'],
                    ['Latvia'],
                    ['Gambia'],
                    ['Kosovo'],
                    ['Guinea-Bissau'],
                    ['Gabon'],
                    ['Equatorial Guinea'],
                    ['Trinidad and Tobago'],
                    ['Estonia'],
                    ['Mauritius'],
                    ['Swaziland'],
                    ['Bahrain'],
                    ['Timor-Leste'],
                    ['Djibouti'],
                    ['Cyprus'],
                    ['Fiji'],
                    ['Reunion (France)'],
                    ['Guyana'],
                    ['Comoros'],
                    ['Bhutan'],
                    ['Montenegro'],
                    ['Macau (China)'],
                    ['Solomon Islands'],
                    ['Western Sahara'],
                    ['Luxembourg'],
                    ['Suriname'],
                    ['Cape Verde'],
                    ['Malta'],
                    ['Guadeloupe (France)'],
                    ['Martinique (France)'],
                    ['Brunei'],
                    ['Bahamas'],
                    ['Iceland'],
                    ['Maldives'],
                    ['Belize'],
                    ['Barbados'],
                    ['French Polynesia (France)'],
                    ['Vanuatu'],
                    ['New Caledonia (France)'],
                    ['French Guiana (France)'],
                    ['Mayotte (France)'],
                    ['Samoa'],
                    ['Sao Tom and Principe'],
                    ['Saint Lucia'],
                    ['Guam (USA)'],
                    ['Curacao (Netherlands)'],
                    ['Saint Vincent and the Grenadines'],
                    ['Kiribati'],
                    ['United States Virgin Islands (USA)'],
                    ['Grenada'],
                    ['Tonga'],
                    ['Aruba (Netherlands)'],
                    ['Federated States of Micronesia'],
                    ['Jersey (UK)'],
                    ['Seychelles'],
                    ['Antigua and Barbuda'],
                    ['Isle of Man (UK)'],
                    ['Andorra'],
                    ['Dominica'],
                    ['Bermuda (UK)'],
                    ['Guernsey (UK)'],
                    ['Greenland (Denmark)'],
                    ['Marshall Islands'],
                    ['American Samoa (USA)'],
                    ['Cayman Islands (UK)'],
                    ['Saint Kitts and Nevis'],
                    ['Northern Mariana Islands (USA)'],
                    ['Faroe Islands (Denmark)'],
                    ['Sint Maarten (Netherlands)'],
                    ['Saint Martin (France)'],
                    ['Liechtenstein'],
                    ['Monaco'],
                    ['San Marino'],
                    ['Turks and Caicos Islands (UK)'],
                    ['Gibraltar (UK)'],
                    ['British Virgin Islands (UK)'],
                    ['Aland Islands (Finland)'],
                    ['Caribbean Netherlands (Netherlands)'],
                    ['Palau'],
                    ['Cook Islands (NZ)'],
                    ['Anguilla (UK)'],
                    ['Wallis and Futuna (France)'],
                    ['Tuvalu'],
                    ['Nauru'],
                    ['Saint Barthelemy (France)'],
                    ['Saint Pierre and Miquelon (France)'],
                    ['Montserrat (UK)'],
                    ['Saint Helena, Ascension and Tristan da Cunha (UK)'],
                    ['Svalbard and Jan Mayen (Norway)'],
                    ['Falkland Islands (UK)'],
                    ['Norfolk Island (Australia)'],
                    ['Christmas Island (Australia)'],
                    ['Niue (NZ)'],
                    ['Tokelau (NZ)'],
                    ['Vatican City'],
                    ['Cocos (Keeling) Islands (Australia)'],
                    ['Pitcairn Islands (UK)'],
        ]);

        var options = {};
        options['dataMode'] = 'regions';
		options['width']='100%';
  options['height']= '90%';

  container = document.getElementById('regions_div');
  geomap = new google.visualization.GeoMap(container);

        geomap.draw(data, options);

    google.visualization.events.addListener(geomap, 'select', function() {
      var selection = geomap.getSelection()[0];
       country = data.getValue(selection.row, 0);
      sendCountry(country);
      alert(country);
});

  }






 function sendCountry(country) {

        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
              if (xmlhttp.responseText != null) {
       var jsonData = xmlhttp.responseText;
       alert(jsonData);
       var arr = JSON.parse(jsonData);
       console.log(arr.data[0].message);

       //aler t(arr[1]);

       var count = Object.keys(jsonData).length
       //alert(count);

       //for (var i = 0; i < arr.length; i++) {
         //alert(arr[i]);
    //var counter = jsonData.arr[i];
    //console.log(counter.message);
//}



       }


              }
        }
        xmlhttp.open("GET", "http://54.173.48.45/jaras/retrieve_posts.php?country="+country,true);
        xmlhttp.send();

}

function myFunction(arr) {

    var out = "";
    var i;
    for(i = 0; i < arr.length; i++) {

      out +=  arr[i].message + arr[i].authentic ;

      }
      alert(out);
    }

    </script>
  </head>
  <body>
    <div id="regions_div"  ></div>
  </body>
</html>
